class TattooAnimation{constructor(t,s={}){this.canvas=document.querySelector(t),this.ctx=this.canvas.getContext("2d"),this.dpr=window.devicePixelRatio||1;this.options={fps:3,imagePathPattern:t=>`assets/images/slides/${t}.jpg`,maxFramesToCheck:100,...s},this.FPS=this.options.fps,this.FRAME_INTERVAL=1e3/this.FPS,this.frames=[],this.currentFrameIndex=0,this.lastTimestamp=0,this.isPaused=!1,this.boundAnimate=this.animate.bind(this),this.resizeCanvas(),window.addEventListener("resize",()=>this.resizeCanvas()),this.addInteractionListeners(),this.loadAllFramesAndStart()}resizeCanvas(){const t=this.canvas.getBoundingClientRect(),s=t.width*this.dpr,a=t.height*this.dpr;this.canvas.width===s&&this.canvas.height===a||(this.canvas.width=s,this.canvas.height=a,this.ctx.setTransform(this.dpr,0,0,this.dpr,0,0))}loadImage(t){return new Promise((s,a)=>{const e=new Image;e.onload=()=>s(e),e.onerror=()=>a(new Error(`Image not found: ${t}`)),e.src=t})}drawFrame(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height);const s=this.canvas.width/this.dpr,a=this.canvas.height/this.dpr;let e,i,n,h;t.width/t.height>s/a?(i=a,e=t.width*(a/t.height),n=(s-e)/2,h=0):(e=s,i=t.height*(s/t.width),n=0,h=(a-i)/2),this.ctx.drawImage(t,n,h,e,i)}async loadAllFramesAndStart(){const t=[];for(let s=0;s<this.options.maxFramesToCheck;s++){const a=this.options.imagePathPattern(s);try{const s=await this.loadImage(a);t.push(s)}catch(t){console.warn(`Stopped loading at missing frame: ${a}`);break}}0!==t.length?(this.frames=t,this.drawFrame(this.frames[0]),requestAnimationFrame(this.boundAnimate)):console.error("No frames loaded.")}animate(t){this.lastTimestamp||(this.lastTimestamp=t);const s=t-this.lastTimestamp;!this.isPaused&&this.frames.length>0&&s>=this.FRAME_INTERVAL&&(this.drawFrame(this.frames[this.currentFrameIndex]),this.currentFrameIndex=(this.currentFrameIndex+1)%this.frames.length,this.lastTimestamp=t),requestAnimationFrame(this.boundAnimate)}addInteractionListeners(){this.canvas.addEventListener("mousedown",()=>this.isPaused=!0),this.canvas.addEventListener("mouseup",()=>this.isPaused=!1),this.canvas.addEventListener("mouseleave",()=>this.isPaused=!1),this.canvas.addEventListener("touchstart",()=>this.isPaused=!0,{passive:!0}),this.canvas.addEventListener("touchend",()=>this.isPaused=!1),this.canvas.addEventListener("touchcancel",()=>this.isPaused=!1)}}const tattoo=new TattooAnimation("#tattoo-canvas",{imagePathPattern:t=>`assets/images/slides/${t}.jpg`,maxFramesToCheck:100});//# sourceMappingURL=main.min.js.map
